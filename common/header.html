<script type="text/javascript">
document.addEventListener('DOMContentLoaded', function() {
    // Initiale Ausführung
    addZoomLinksToSVGs();
    
    // Beobachte Änderungen im DOM für dynamisch nachgeladene Inhalte
    const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
            if (mutation.addedNodes.length) {
                addZoomLinksToSVGs();
            }
        });
    });
    
    observer.observe(document.body, {
        childList: true,
        subtree: true
    });
    
    function addZoomLinksToSVGs() {
        // Finde alle SVGs im Dokument
        const svgs = document.querySelectorAll('.cooked svg');
        
        svgs.forEach(svg => {
            // Prüfe ob bereits ein zoom-Link existiert
            if (!svg.nextElementSibling?.classList.contains('svg-zoom-link')) {
                // Erstelle den zoom-Link
                const zoomLink = document.createElement('a');
                zoomLink.href = '#';
                zoomLink.textContent = 'zoom';
                zoomLink.className = 'svg-zoom-link';
                
                // Füge Click-Handler hinzu
                zoomLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Kopiere das SVG und seine Styles
                    const svgClone = svg.cloneNode(true);
                    
                    // Erstelle HTML-Dokument mit dem SVG
                    const html = `
                        <!DOCTYPE html>
                        <html>
                        <head>
                            <title>SVG Zoom View</title>
                            <style>
                                body { margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; }
                                svg { max-width: 95vw; max-height: 95vh; }
                            </style>
                        </head>
                        <body>
                            ${svgClone.outerHTML}
                        </body>
                        </html>
                    `;
                    
                    // Erstelle Blob und URL
                    const blob = new Blob([html], { type: 'text/html' });
                    const blobUrl = URL.createObjectURL(blob);
                    
                    // Öffne neues Fenster
                    window.open(blobUrl, '_blank', 'width=800,height=600');
                    
                    // Cleanup nach kurzer Verzögerung
                    setTimeout(() => URL.revokeObjectURL(blobUrl), 1000);
                });
                
                // Füge den Link nach dem SVG ein
                svg.insertAdjacentElement('afterend', zoomLink);
            }
        });
    }
});
</script>

<style>
.svg-zoom-link {
    display: block;
    margin-top: 5px;
    color: var(--primary);
    font-size: 0.9em;
}
</style> 